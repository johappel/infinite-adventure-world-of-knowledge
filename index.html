<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>KI-gest√ºtzte Wissens-Entdeckungswelt ‚Äì Prototype</title>
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Ccircle cx='8' cy='8' r='8' fill='%236ee7ff'/%3E%3C/svg%3E">
  <link rel="stylesheet" href="styles/main.css">
  <meta name="description" content="Prototyp einer KI-gest√ºtzten Wissens-Entdeckungswelt: dynamisch generierte 3D-Zonen, Personas, Portale, Chat und persistente Spuren." />
  <script async src="https://ga.jspm.io/npm:es-module-shims@1.10.0/dist/es-module-shims.min.js"></script>
  <script>
    // Polyfill for import maps on older browsers
    if (!HTMLScriptElement.supports || !HTMLScriptElement.supports('importmap')) {
      document.currentScript.setAttribute('data-needs-polyfill', 'true');
    }
  </script>
  <script type="importmap">
  {
    "imports": {
      "three": "https://cdn.jsdelivr.net/npm/three@0.165.0/build/three.module.js",
      "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.165.0/examples/jsm/"
    }
  }
  </script>
  <!-- YAML Parser f√ºr Weltendateien -->
  <script src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
</head>
<body>
  <header>
    <div class="brand"><div class="logo"></div><div>Wissens-Entdeckungswelt</div></div>
    <span class="pill">Prototype ‚Ä¢ Local-only assets</span>
    <div class="toolbar">
      <select id="personaSelect" title="Persona w√§hlen">
        <option value="Forscher">Persona: Forscher</option>
        <option value="Lehrer">Persona: Lehrer</option>
        <option value="Magier">Persona: Magier</option>
        <option value="Sch√ºler">Persona: Sch√ºler</option>
      </select>
      <button id="newZoneBtn">Neue Zone entdecken</button>
      <button id="portalBtn">Portal √∂ffnen</button>
      <button id="yamlStartBtn">üå± Startwiese (YAML)</button>
      <button id="yamlForestBtn">üå≤ Mystischer Wald (YAML)</button>
      <button id="yamlArchiveBtn">üìö Bibliothek (YAML)</button>
      <button id="resetBtn" title="Lokal gespeicherte Spuren l√∂schen">Persistenz zur√ºcksetzen</button>
    </div>
  </header>

  <main>
    <div id="viewport">
      <canvas id="three"></canvas>
      <div id="loading"><div class="spin"></div></div>
      <div id="hud">
        <div class="hud-pill" id="zoneName">Zone: ‚Äî</div>
        <div class="hud-pill" id="personaHUD">Persona: Forscher</div>
        <div class="hud-pill"><span class="kbd">A/D</span> drehen ‚Ä¢ <span class="kbd">W/S</span> vor/zur√ºck ‚Ä¢ <span class="kbd">Rechte Maus halten</span> Kamera ‚Ä¢ <span class="kbd">E / Linksklick</span> interagieren</div>
      </div>
    </div>
  </main>

  <aside>
    <div class="panel">
      <h3>Entdeckungszonen</h3>
      <div id="zones"></div>
    </div>
    <div class="panel">
      <h3>Personas im Raum</h3>
      <div id="personas"></div>
    </div>
    <div class="panel">
      <h3>Weltprotokoll (Persistenz)</h3>
      <div id="log"></div>
    </div>
  </aside>

  <footer>
    <div class="dialog">
      <div class="dialog-header">Dialog ‚Ä¢ <span id="activeNPC">Niemand</span></div>
      <div class="dialog-body" id="dialogBody"></div>
      <div class="dialog-input">
        <input id="userInput" placeholder="Nachricht eingeben oder Optionen w√§hlen ‚Ä¶" />
        <button id="sendBtn">Senden</button>
      </div>
    </div>
    <div class="refs">
      <div class="refs-title">Konzept-Notizen & Referenzen</div>
      <ul class="refs-list">
        <li>Dezentrale Multi-User-Architektur mit Nostr-Events f√ºr Inhalte, Markdown-first, optionale eigene Event-Kinds und Snips. Siehe Clients-√úbersicht f√ºr √ñkosystem-Kontext: <a href="https://nostr.com/clients" target="_blank" rel="noopener">nostr.com</a>. Einf√ºhrung in Client-Typen und Nutzungsszenarien: <a href="https://nostr.how/en/clients" target="_blank" rel="noopener">nostr.how</a>. Design-Guidelines und Produkt√ºberlegungen: <a href="https://nostrdesign.org/" target="_blank" rel="noopener">nostrdesign.org</a>.</li>
        <li>Als Inspiration f√ºr Client-Umsetzungen/Engines: Beispiel eines Unity-Clients (nicht verwendet, nur Referenz): <a href="https://github.com/NostrTraining/Nostr-Unity3D-Client" target="_blank" rel="noopener">github.com</a>.</li>
        <li>Leaderboards/Anzeigetafeln als Spielmechanik-Idee: Funktions-/KV-Store-Ansatz erkl√§rt von PubNub (Konzeptreferenz): <a href="https://dev.to/pubnub-de/so-fugen-sie-eine-anzeigetafel-und-ein-leaderboard-zu-ihrem-unity-spiel-hinzu-1j85" target="_blank" rel="noopener">dev.to</a>.</li>
      </ul>
      <div class="refs-note">
        Hinweis: Dieser Prototyp erzeugt alle Assets prozedural im Browser. Keine externen Medien. Nostr ist hier nur modelliert (lokaler Event-Log), nicht live verbunden.
      </div>
    </div>
  </footer>

  <script type="module">
    import { WisdomWorld } from './js/wisdom-world.js';
    
    // Initialize the application
    const app = new WisdomWorld();
  </script>
</body>
</html>
